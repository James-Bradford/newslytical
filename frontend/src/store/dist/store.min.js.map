{"version":3,"sources":["store.js"],"names":["_vue","_interopRequireDefault","require","_vuex","_Api","_psl","Vue","use","Vuex","store","Store","state","rawTweet","tweet","twitterTrendsUS","twitterTrendsUK","whois","isLoading","tab","SAVE_RAW_TWEET","SAVE_TWITTER_TRENDS_UK","SAVE_TWEET","SAVE_TWITTER_TRENDS_US","commit","get","id","then","result","data","error","Error","loadTweet","dispatch","Api","concat","loadWhois","urls","entities","i","url","expanded_url","hostname","indexOf","split","extractedUrl","push","self","this","loadTwitterTrendsUS","setTab","_ref4"],"mappings":"yFAAA,IAAAA,KAAAC,uBAAAC,QAAA,QACAC,MAAAF,uBAAAC,QAAA,SACAE,KAAAH,uBAAAC,QAAA,oBACAG,KAAAJ,uBAAAC,QAAA,gFAEAI,KAAAA,QAAIC,IAAIC,MAAAA,SALR,IAAAC,MAAA,IAAAD,MAAAA,QAAAE,MAAA,CAQIC,MAAO,CAPXC,SAAA,GASQC,MAAO,GARfC,gBAAA,GAUQC,gBAAiB,GATzBC,MAAA,KAWQC,WAAW,EACXC,IAAK,GAVbZ,UAAAA,CAaQa,eAbRb,SAauBK,EAAOC,GAXTD,EAAIH,SAAAA,GAEjBI,WAJRN,SAGWK,EAAAE,GAEIF,EAFJE,MAAAA,GAIHE,uBAPRT,SAGWK,EAAAG,GAKIH,EALJG,gBAAAA,GAOAM,uBAVXd,SAUaK,EAAAI,GARuBJ,EAAAI,gBAAAA,GAW5BI,WAbRb,SAYeK,EAAAK,GAEGJ,EAAAA,MAAWA,GAErBS,kBAhBRf,SAYeK,GAKGE,EAANI,WAAAN,EAAAM,WAEJK,SAnBRhB,SAmBQgB,EAAAA,GACUR,EAAAA,IAAAA,IAGNH,QAAMI,CAMNJ,aANMI,SAAAA,EAMmBE,GAAAA,IAAzBM,EAAyBN,EAAzBM,OAGML,KAAAA,QAANM,IAAMN,iBAAAA,OAANO,IACHC,KAAA,SAAAC,GAEIJ,EAAA,iBAAAI,EAAAC,QAHKV,MAkBO,SAAAW,GACL,MAAM,IAAIC,MAAM,gBAPxBC,UArBMhB,SAAAA,EA2BgBU,GA3BhBV,IAAAA,EAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OA2BOQ,EA3BPR,EA2BOQ,OAAKS,EA3BZjB,EA2BYiB,SA3BZjB,EAAAA,KAAAA,EAAAA,mBAAAA,MAYLkB,KAAAA,QAAAT,IAAA,iBAAAU,OAAAT,IA4BIC,KAAK,SAAUC,GATxBJ,EAAA,aAAAI,EAAAC,QAYWF,KAAK,WACJM,EAAS,eAhChB,MAiCY,SAAAH,GAjCZ,MAAA,IAAAC,MAAA,gBAZKf,KAAAA,EAAAA,IAAAA,MAAAA,OAAAA,EAAAA,WAYLoB,UAZKpB,SAAAA,GAAAA,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAYLQ,EAZKR,EAYLQ,OAAAZ,EAZKI,EAYLJ,MAAAyB,EAAAzB,EAAAE,MAAAwB,SAAAD,KA6BOb,EAAO,GAFTe,EAAA,EAvCAvB,KAAAA,EAAAA,GA6COuB,EAAAF,EAAAP,OA7CPd,OAYLwB,EAAAH,EAAAE,GAAAE,aAAAC,GAAAA,GAAAA,GAAA,EAAAF,EAAAG,QAAA,MAAAH,EAAAI,MAAA,KAAA,GAAAJ,EAAAI,MAAA,KAAA,IAAAA,MAAA,KAAA,IAAAA,MAAA,KAAA,GAAAC,EA0CsBP,KAAAA,QAAAA,IAASD,GAtD1BrB,EAAAA,KAAAA,GAAAA,mBAAAA,MAYLkB,KAAAA,QAAAT,IAAA,SAAAU,OAAAU,IAoEQlB,KAAK,SAAUC,GApEvBX,EAAA6B,KAAAlB,EAAAC,QAAA,MAAA,SAAAC,GA0EW,MAAM,IAAIC,MAAM,gBAtFtBf,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,GA6CgBuB,IA7ChBvB,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,GAiEE0B,EAAAA,aAAeE,GAjEjB5B,KAAAA,GAAAA,IAAAA,MAAAA,OAAAA,EAAAA,WAmEE0B,oBAnEF1B,WAoED,IAED+B,EAAAC,KA0BJd,KAAAA,QAAIT,IAAJ,wBAzBIiB,KAAQ,SAAGA,GA2BPK,EAAKvB,OAAO,yBAA0BI,EAAOC,QAFrD,MAvBea,SAAAA,GA2BP,MAAM,IAAIX,MAAM,gBAxFvBkB,oBAZKjC,WAYL,IAAA+B,EAAAC,KAuEW/B,KAAAA,QAAAA,IAAAA,0BAJFU,KAAA,SAMKC,GACHmB,EAAMvB,OAAU,yBAAhBI,EAAAC,QAHAZ,MAvEX,SAAAa,GAkGO,MAAM,IAAIC,MAAM,gBAlGvBmB,OAZKlC,SAAAA,EAYLG,GAAAgC,EAAA3B,OAAAwB,KAAAxB,OAAA,WAAAL","file":"store.min.js","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport Api from '../services/Api'\nimport psl from \"psl\";\n\nVue.use(Vuex)\n\nexport const store = new Vuex.Store({\n    state: {\n        rawTweet: {},\n        tweet: {},\n        twitterTrendsUS: [],\n        twitterTrendsUK: [],\n        whois: null,\n        isLoading: false,\n        tab: 0\n    },\n    mutations: {\n        SAVE_RAW_TWEET(state, rawTweet) {\n            state.rawTweet = rawTweet;\n        },\n        SAVE_TWEET(state, tweet) {\n            state.tweet = tweet;\n        },\n        SAVE_TWITTER_TRENDS_US(state, twitterTrendsUS) {\n            state.twitterTrendsUS = twitterTrendsUS;\n        },\n        SAVE_TWITTER_TRENDS_UK(state, twitterTrendsUK) {\n            state.twitterTrendsUK = twitterTrendsUK;\n        },\n        SAVE_WHOIS(state, whois) {\n            state.whois = whois;\n        },\n        TOGGLE_IS_LOADING(state) {\n            state.isLoading = !state.isLoading;\n        },\n        SAVE_TAB(state, tab) {\n            state.tab = tab;\n        }\n    },\n    actions: {\n        /**\n        * Call API to load Tweet and highlight\n        * @param {*} param0 \n        * @param {*} id \n        */\n        loadRawTweet({ commit }, id) {\n\n            //Make API call\n            Api.get(`twitter/tweet/${id}`)\n                .then(function (result) {\n\n                    commit('SAVE_RAW_TWEET', result.data)\n\n                    //Throw error if needed\n                }).catch(error => {\n                    throw new Error(\"API ERROR\");\n                });\n        },\n        /**\n         * Call API to load Tweet and highlight\n         * @param {*} param0 \n         * @param {*} id \n         */\n        async loadTweet({ commit, dispatch }, id) {\n\n            //Assign modified tweet to state\n            await Api.get(`twitter/tweet/${id}`)\n                .then(function (result) {\n                    commit('SAVE_TWEET', result.data);\n                    //Throw error if needed\n                }).then(function () {\n                    dispatch('loadWhois');\n                }).catch(error => {\n                    throw new Error(\"API ERROR\");\n                });\n\n\n        },\n        async loadWhois({ commit, state }) {\n\n\n            var urls = state.tweet.entities.urls;\n            var whois = [];\n\n            //Performs whois on each hostname in Tweet\n            for (let i = 0; i < urls.length; i++) {\n\n                var url = urls[i].expanded_url;\n                var hostname;\n                //find & remove protocol (http, ftp, etc.) and get hostname\n\n                if (url.indexOf(\"//\") > -1) {\n                    hostname = url.split(\"/\")[2];\n                } else {\n                    hostname = url.split(\"/\")[0];\n                }\n\n                //find & remove port number\n                hostname = hostname.split(\":\")[0];\n                //find & remove \"?\"\n                hostname = hostname.split(\"?\")[0];\n\n                //Extract hostname\n                var extractedUrl = psl.get(hostname);\n\n                //Make API call\n                await Api.get(`whois/${extractedUrl}`)\n                    .then(function (result) {\n\n                        //Add result to array\n                        whois.push(result.data);\n                    })\n                    .catch(error => {\n                        throw new Error(\"API ERROR\");\n                    });\n            }\n\n            //Assign local variable\n            commit('SAVE_WHOIS', whois);\n        },\n        loadTwitterTrendsUK() {\n            var self = this;\n\n            Api.get(`twitter/trends/44418`)\n                .then(function (result) {\n                    self.commit('SAVE_TWITTER_TRENDS_UK', result.data);\n                }).catch(error => {\n                    throw new Error(\"API ERROR\");\n                });\n        },\n        loadTwitterTrendsUS() {\n            var self = this;\n\n            Api.get(`twitter/trends/2459115`)\n                .then(function (result) {\n                    self.commit('SAVE_TWITTER_TRENDS_US', result.data);\n                }).catch(error => {\n                    throw new Error(\"API ERROR\");\n                });\n        },\n        setTab({ commit }, tab) {\n            this.commit('SAVE_TAB', tab);\n        }\n    }\n});"]}