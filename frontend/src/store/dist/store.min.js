"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.store=void 0;var _vue=_interopRequireDefault(require("vue")),_vuex=_interopRequireDefault(require("vuex")),_Api=_interopRequireDefault(require("../services/Api")),_psl=_interopRequireDefault(require("psl"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}_vue.default.use(_vuex.default);var store=new _vuex.default.Store({state:{rawTweet:{},tweet:{},twitterTrendsUS:[],twitterTrendsUK:[],whois:null,tab:Number},mutations:{SAVE_RAW_TWEET:function(t,e){t.rawTweet=e},SAVE_TWEET:function(t,e){t.tweet=e},SAVE_TWITTER_TRENDS_US:function(t,e){t.twitterTrendsUS=e},SAVE_TWITTER_TRENDS_UK:function(t,e){t.twitterTrendsUK=e},SAVE_WHOIS:function(t,e){t.whois=e},SAVE_TAB:function(t,e){t.tab=e}},actions:{loadRawTweet:function(t,e){t.commit;var r=this;_Api.default.get("twitter/tweet/".concat(e)).then(function(t){r.commit("SAVE_RAW_TWEET",t.data)}).catch(function(t){throw new Error("API ERROR")})},loadTweet:function(t,e){t.commit,t.state;var n=this,a={},o=[],r=[];_Api.default.get("twitter/tweet/".concat(e)).then(function(t){a=t.data,o=a.entities.urls;var e=a.entities.hashtags;for(var r in o)a.full_text=a.full_text.replace(o[r].url,'<span class="highlightURL">'.concat(o[r].expanded_url,"</span>"));for(var i in e)a.full_text=a.full_text.replace("#"+e[i].text,'<span class="highlightHashtag">#'.concat(e[i].text,"</span>"));n.commit("SAVE_TWEET",a)}).catch(function(t){throw new Error("API ERROR")});for(var i=0;i<o.length;i++){var u;u=(u=(u=-1<c.indexOf("//")?c.split("/")[2]:c.split("/")[0]).split(":")[0]).split("?")[0];var c=_psl.default.get(u);_Api.default.get("whois/".concat(c)).then(function(t){r.push(t.data)}).catch(function(t){throw new Error("API ERROR")})}this.commit("SAVE_WHOIS",r)},loadTwitterTrendsUK:function(){var e=this;_Api.default.get("twitter/trends/44418").then(function(t){e.commit("SAVE_TWITTER_TRENDS_UK",t.data)}).catch(function(t){throw new Error("API ERROR")})},loadTwitterTrendsUS:function(){var e=this;_Api.default.get("twitter/trends/2459115").then(function(t){e.commit("SAVE_TWITTER_TRENDS_US",t.data)}).catch(function(t){throw new Error("API ERROR")})},setTab:function(t,e){t.commit;this.commit("SAVE_TAB",e)}}});exports.store=store;
//# sourceMappingURL=store.min.js.map
