"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.store=void 0;var _vue=_interopRequireDefault(require("vue")),_vuex=_interopRequireDefault(require("vuex")),_Api=_interopRequireDefault(require("../services/Api")),_psl=_interopRequireDefault(require("psl"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}_vue.default.use(_vuex.default);var store=new _vuex.default.Store({state:{rawTweet:{},tweet:{},twitterTrendsUS:[],twitterTrendsUK:[],whois:null,isLoading:!1,tab:Number},mutations:{SAVE_RAW_TWEET:function(t,e){t.rawTweet=e},SAVE_TWEET:function(t,e){t.tweet=e},SAVE_TWITTER_TRENDS_US:function(t,e){t.twitterTrendsUS=e},SAVE_TWITTER_TRENDS_UK:function(t,e){t.twitterTrendsUK=e},SAVE_WHOIS:function(t,e){t.whois=e},TOGGLE_IS_LOADING:function(t){t.isLoading=!t.isLoading},SAVE_TAB:function(t,e){t.tab=e}},actions:{loadRawTweet:function(t,e){var n=t.commit;_Api.default.get("twitter/tweet/".concat(e)).then(function(t){n("SAVE_RAW_TWEET",t.data)}).catch(function(t){throw new Error("API ERROR")})},loadTweet:function(e,n){var r,i;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,i=e.dispatch,t.next=3,regeneratorRuntime.awrap(_Api.default.get("twitter/tweet/".concat(n)).then(function(t){r("SAVE_TWEET",t.data)}).then(function(){i("loadWhois")}).catch(function(t){throw new Error("API ERROR")}));case 3:case"end":return t.stop()}})},loadWhois:function(e){var n,r,i,o,a,u,c,s;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.commit,r=e.state,i=r.tweet.entities.urls,o=[],a=0;case 4:if(a<i.length)return u=i[a].expanded_url,c=(c=(c=-1<u.indexOf("//")?u.split("/")[2]:u.split("/")[0]).split(":")[0]).split("?")[0],s=_psl.default.get(c),t.next=12,regeneratorRuntime.awrap(_Api.default.get("whois/".concat(s)).then(function(t){o.push(t.data)}).catch(function(t){throw new Error("API ERROR")}));t.next=15;break;case 12:a++,t.next=4;break;case 15:n("SAVE_WHOIS",o);case 16:case"end":return t.stop()}})},loadTwitterTrendsUK:function(){var e=this;_Api.default.get("twitter/trends/44418").then(function(t){e.commit("SAVE_TWITTER_TRENDS_UK",t.data)}).catch(function(t){throw new Error("API ERROR")})},loadTwitterTrendsUS:function(){var e=this;_Api.default.get("twitter/trends/2459115").then(function(t){e.commit("SAVE_TWITTER_TRENDS_US",t.data)}).catch(function(t){throw new Error("API ERROR")})},setTab:function(t,e){t.commit;this.commit("SAVE_TAB",e)}}});exports.store=store;
//# sourceMappingURL=store.min.js.map
