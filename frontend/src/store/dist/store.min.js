"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.store=void 0;var _vue=_interopRequireDefault(require("vue")),_vuex=_interopRequireDefault(require("vuex")),_Api=_interopRequireDefault(require("../services/Api")),_psl=_interopRequireDefault(require("psl"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}_vue.default.use(_vuex.default);var store=new _vuex.default.Store({state:{rawTweet:{},tweet:{},twitterTrendsUS:[],twitterTrendsUK:[],whois:null,isLoading:!1,tab:0},mutations:{SAVE_RAW_TWEET:function(e,t){e.rawTweet=t},SAVE_TWEET:function(e,t){e.tweet=t},SAVE_TWITTER_TRENDS_US:function(e,t){e.twitterTrendsUS=t},SAVE_TWITTER_TRENDS_UK:function(e,t){e.twitterTrendsUK=t},SAVE_WHOIS:function(e,t){e.whois=t},TOGGLE_IS_LOADING:function(e){e.isLoading=!e.isLoading},SAVE_TAB:function(e,t){e.tab=t}},actions:{loadRawTweet:function(e,t){var n=e.commit;_Api.default.get("twitter/tweet/".concat(t)).then(function(e){n("SAVE_RAW_TWEET",e.data)}).catch(function(e){throw new Error("API ERROR")})},loadTweet:function(t,n){var r,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,i=t.dispatch,e.next=3,regeneratorRuntime.awrap(_Api.default.get("twitter/tweet/".concat(n)).then(function(e){r("SAVE_TWEET",e.data)}).then(function(){i("loadWhois")}).catch(function(e){throw new Error("API ERROR")}));case 3:case"end":return e.stop()}})},loadWhois:function(t){var n,r,i,o,a,u,s,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.commit,r=t.state,i=r.tweet.entities.urls,o=[],a=0;case 4:if(a<i.length)return u=i[a].expanded_url,s=(s=(s=-1<u.indexOf("//")?u.split("/")[2]:u.split("/")[0]).split(":")[0]).split("?")[0],c=_psl.default.get(s),e.next=12,regeneratorRuntime.awrap(_Api.default.get("whois/".concat(c)).then(function(e){o.push(e.data)}).catch(function(e){throw new Error("API ERROR")}));e.next=15;break;case 12:a++,e.next=4;break;case 15:n("SAVE_WHOIS",o);case 16:case"end":return e.stop()}})},setTab:function(e,t){e.commit;this.commit("SAVE_TAB",t)}}});exports.store=store;
//# sourceMappingURL=store.min.js.map
